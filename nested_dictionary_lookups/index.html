
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Dictionary Lookup - Exploring the Depths &#8212; Mutaku  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=edb592bf" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css?v=2a6c4383" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css?v=d290406d" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=187304be"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'nested_dictionary_lookups';</script>
    <link rel="author" title="About these documents" href="../about/" />
    <link rel="index" title="Index" href="../genindex/" />
    <link rel="search" title="Search" href="../search/" /> 
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" /> 
<link
  rel="alternate"
  type="application/atom+xml"
  href="../blog/atom.xml"
  title="Mutaku"
/>
  
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search/"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/plot_header.png" class="logo__image only-light" alt="Mutaku  documentation - Home"/>
    <img src="../_static/plot_header.png" class="logo__image only-dark pst-js-only" alt="Mutaku  documentation - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../about/">
    About Matthew Martz
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/mutaku/" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/backpropagating" title="Twitter" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-twitter fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Twitter</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../about/">
    About Matthew Martz
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/mutaku/" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://twitter.com/backpropagating" title="Twitter" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-twitter fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Twitter</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><div class="logo"><img src="../_static/profile.jpg"></div>
<div class="snippet">
    <div class="name">Matthew Martz, PhD</div>
    <div class="title">Director of Data Science/ML/AI and Technical Lead / Strategic Vision</div>
    <div class="specialties">Machine learning | Predictive Modeling | Data Science | Biomedical Research | Strategy and Vision | Leadership | Clinical AI | Startups</div>
</div></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Dictionary Lookup - Exploring the Depths</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                   <section id="dictionary-lookup-exploring-the-depths">
<h1>Dictionary Lookup - Exploring the Depths<a class="headerlink" href="#dictionary-lookup-exploring-the-depths" title="Link to this heading">#</a></h1>
<p>Exploring methods of performant Python dictionary lookups</p>
<div class="sphinx-bs container pb-4 docutils">
<div class="row docutils">
<div class="d-flex col-lg-12 p-0 docutils">
<div class="card w-100 shadow docutils">
<div class="card-header font-weight-bold bg-info docutils">
<p class="card-text">Note</p>
</div>
<div class="card-body docutils">
<p class="card-text">This is an in-progress draft.</p>
</div>
</div>
</div>
</div>
</div>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">#</a></h2>
<p>Some introduction text here.</p>
</section>
<section id="the-bread-and-butter">
<h2>The Bread and Butter<a class="headerlink" href="#the-bread-and-butter" title="Link to this heading">#</a></h2>
<p>Let us start with a simple, nested dictionary lookup.</p>
<div class="sphinx-bs container pb-4 docutils">
<div class="row docutils">
<div class="d-flex col-lg-12 p-0 docutils">
<div class="card w-100 shadow docutils">
<div class="card-header text-secondary docutils">
<p class="card-text">Find the value of our nested key</p>
</div>
<div class="card-body docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data_dict</span><span class="p">[</span><span class="s1">&#39;this&#39;</span><span class="p">][</span><span class="s1">&#39;that&#39;</span><span class="p">][</span><span class="s1">&#39;the_other&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
<p>As you likely know, we will raise a KeyError exception if any of the keys within our
lookup chain are missing. If we want to fallback to a default value, we can wrap this
to return our default with a failed retrieval.</p>
<div class="sphinx-bs container pb-4 docutils">
<div class="row docutils">
<div class="d-flex col-lg-12 p-0 docutils">
<div class="card w-100 shadow docutils">
<div class="card-header text-secondary docutils">
<p class="card-text">Example Code</p>
</div>
<div class="card-body docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">default</span> <span class="o">=</span> <span class="kc">None</span>

<span class="k">try</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">data_dict</span><span class="p">[</span><span class="s1">&#39;this&#39;</span><span class="p">][</span><span class="s1">&#39;that&#39;</span><span class="p">][</span><span class="s1">&#39;the_other&#39;</span><span class="p">]</span>
<span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">default</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="a-simple-example">
<h2>A Simple Example<a class="headerlink" href="#a-simple-example" title="Link to this heading">#</a></h2>
<p>Setup the example here before we define things.</p>
<p><code class="docutils literal notranslate"><span class="pre">data_dict</span></code> is a dict where we expect in a perfect world we would have
our expected structure and could simply query the deepest nested level
for <code class="docutils literal notranslate"><span class="pre">our_key</span></code> and default to <code class="docutils literal notranslate"><span class="pre">default_value</span></code>. But we know we can’t
expect anything either than <code class="docutils literal notranslate"><span class="pre">data_dict</span></code> exists and is a dict</p>
<div class="sphinx-bs container pb-4 docutils">
<div class="row docutils">
<div class="d-flex col-lg-12 p-0 docutils">
<div class="card w-100 shadow docutils">
<div class="card-header text-secondary docutils">
<p class="card-text">Three example methods for key lookup</p>
</div>
<div class="card-body docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">default_value</span> <span class="o">=</span> <span class="mf">1.0</span>


<span class="k">def</span><span class="w"> </span><span class="nf">old_style</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Old style (Python &lt; 3.8)&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="s1">&#39;top_level&#39;</span> <span class="ow">in</span> <span class="n">data_dict</span><span class="p">:</span>
        <span class="k">if</span> <span class="s1">&#39;lower_level&#39;</span> <span class="ow">in</span> <span class="n">data_dict</span><span class="p">[</span><span class="s1">&#39;top_level&#39;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="s1">&#39;our_key&#39;</span> <span class="ow">in</span> <span class="n">data_dict</span><span class="p">[</span><span class="s1">&#39;top_level&#39;</span><span class="p">][</span><span class="s1">&#39;lower_level&#39;</span><span class="p">]:</span>
                <span class="k">return</span> <span class="n">data_dict</span><span class="p">[</span><span class="s1">&#39;top_level&#39;</span><span class="p">][</span><span class="s1">&#39;lower_level&#39;</span><span class="p">][</span><span class="s1">&#39;our_key&#39;</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">default_value</span>


<span class="k">def</span><span class="w"> </span><span class="nf">walrus_style</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Walrus operator cleans this up&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">top</span> <span class="o">:=</span> <span class="n">data_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;top_level&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)):</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">lower</span> <span class="o">:=</span> <span class="n">top</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;lower_level&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">lower</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;our_key&#39;</span><span class="p">,</span> <span class="n">default_value</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">default_value</span>


<span class="k">def</span><span class="w"> </span><span class="nf">chaining_style</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Chaining with object defaults&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">(</span>
        <span class="n">data_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;top_level&quot;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;lower_level&quot;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;our_key&quot;</span><span class="p">,</span> <span class="n">default_value</span><span class="p">)</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
<p>Try with an empty <code class="docutils literal notranslate"><span class="pre">data_dict</span></code> We should expect the first two to be
faster as they break quicker</p>
<div class="sphinx-bs container pb-4 docutils">
<div class="row docutils">
<div class="d-flex col-lg-12 p-0 docutils">
<div class="card w-100 shadow docutils">
<div class="card-header text-secondary docutils">
<p class="card-text">Timing our methods</p>
</div>
<div class="card-body docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">timeit</span> <span class="n">old_style</span><span class="p">()</span>
<span class="o">%</span><span class="n">timeit</span> <span class="n">walrus_style</span><span class="p">()</span>
<span class="o">%</span><span class="n">timeit</span> <span class="n">chaining_style</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>152 ns ± 0.825 ns per loop (mean ± std. dev. of 7 runs, 10000000 loops each)
204 ns ± 2.71 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)
366 ns ± 1.66 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
<p>Indeed, if we do not have our initial key, our chained lookup is longer
since it proceeds through multiple lookups. Our walrus method is a
little slower since we make an assignment. So the simple nested hash
lookups will fail faster.</p>
<p>Now let’s use a semi-populated <code class="docutils literal notranslate"><span class="pre">data_dict</span></code> We should expect some
convergence on timing now that we remove the early fail</p>
<div class="sphinx-bs container pb-4 docutils">
<div class="row docutils">
<div class="d-flex col-lg-12 p-0 docutils">
<div class="card w-100 shadow docutils">
<div class="card-header text-secondary docutils">
<p class="card-text">Failing early in our lookup</p>
</div>
<div class="card-body docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data_dict</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;top_level&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;lower_level&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;not_our_key&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">}}</span>
<span class="p">}</span>

<span class="o">%</span><span class="n">timeit</span> <span class="n">old_style</span><span class="p">()</span>
<span class="o">%</span><span class="n">timeit</span> <span class="n">walrus_style</span><span class="p">()</span>
<span class="o">%</span><span class="n">timeit</span> <span class="n">chaining_style</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>303 ns ± 1.31 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)
373 ns ± 0.586 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)
359 ns ± 0.543 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
<p>Now we do see a bit more convergence on timing since we have to recurse
with all methods. And the first method still wins by using only hash
lookups as opposed to multiple rounds of assignment. What intrigues me
is that the chained assignment is faster than the walrus operator method
(will do some PEP research, this is a good CS exercise).</p>
<p>Now let’s try the last scenario when our key is indeed in our structure</p>
<div class="sphinx-bs container pb-4 docutils">
<div class="row docutils">
<div class="d-flex col-lg-12 p-0 docutils">
<div class="card w-100 shadow docutils">
<div class="card-header text-secondary docutils">
<p class="card-text">Finding our nested key</p>
</div>
<div class="card-body docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;top_level&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;lower_level&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;our_key&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">}}}</span>
<span class="o">%</span><span class="n">timeit</span> <span class="n">old_style</span><span class="p">()</span>
<span class="o">%</span><span class="n">timeit</span> <span class="n">walrus_style</span><span class="p">()</span>
<span class="o">%</span><span class="n">timeit</span> <span class="n">chaining_style</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>404 ns ± 5.23 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)
370 ns ± 1.45 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)
372 ns ± 1.74 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
<p>Now we get interesting. If we have our key, the first method only using
hash lookups is slower when we will end up getting our key of interest.
We have to identify lookup, then ultimately do it all again to get our
value. However, with walrus and chaining assignment, we are doing a
lookup <em>and</em> storing of the value as we go. So when we get to the final
level of recursion we can simply return what we have. We also now see
that the walrus and chaining methods have equalized.</p>
</section>
<section id="summarizing-our-toy-data-experiments">
<h2>Summarizing Our Toy Data Experiments<a class="headerlink" href="#summarizing-our-toy-data-experiments" title="Link to this heading">#</a></h2>
<p>To summarize, continual assignment works nice when we can fairly
confidently expect to recurse through most of our data structure and not
fail immediately. The walrus operator introduced in Python 3.8 is truly
wonderful, and one of my favorite Python 3 additions (I know, you
probably said Async or division). Without further testing, we are left
primarily to a style decision.</p>
<p>While I often use the chaining approach with empty dict structures as
defaults to continue the chain, and personally find it a clean syntax,
the walrus operator approach has (at least) two primary benefits: 1)
while debugging we would have the value of the last successful lookup
regardless of where it failed, and 2) I think it’s a bit more
understandable to someone who might not be as familiar with the idea of
chaining an object. As an additional note regarding the first point, we
could obtain the value of our last lookup by assigning it. However, when
we do that, we are simply performing the task the walrus operator was
introduced to provide. Another [+1] for the walrus operator method.</p>
<p>Further, if we would be working with large, messy nesting and
performance was critical – and we will presume so – we know from many
nights of banging our heads against the keyboard that we can never
expect a consistent data structure. I know we are all thinking of that
master piece of a JSON dump we get from some third party service we are
required to utilize that contains inconsistent structure and data types.
That one for which we will have to parse at 3am again and again.
Therefore, our method should be performant at any level of lookup
failure. Our chaining method will always get or assign all the way
through the intended structure. If we expect a very large recursion, but
we don’t actually have it, we would have to use the time and memory to
unecessarily work through all of that failure. That would leave us with
the nested if/else or the walrus style. So again, another [+1] for the
walrus operator method. Are you seeing the theme?</p>
</section>
<section id="moving-beyond-our-toy-data-let-s-make-some-real-improvements">
<h2>Moving Beyond Our Toy Data - Let’s Make Some Real Improvements<a class="headerlink" href="#moving-beyond-our-toy-data-let-s-make-some-real-improvements" title="Link to this heading">#</a></h2>
<p>We used some fixed key lookups here. This works okay for a shallow
search depth. However, I would say that anything beyond four keys is a
bit unwieldy. In this case, and likely if we are going to do any depth
of search consistently in a a module, we should create a more
programmatic approach that might step through a list of keys. I’ll end
with a very quick example of how I might implement such an approach, but
note, we would want to write some tests around this – it is merely a
quick starting block.</p>
<div class="sphinx-bs container pb-4 docutils">
<div class="row docutils">
<div class="d-flex col-lg-12 p-0 docutils">
<div class="card w-100 shadow docutils">
<div class="card-header text-secondary docutils">
<p class="card-text">A programmatic and modular method</p>
</div>
<div class="card-body docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">programmatic_depth_search</span><span class="p">(</span><span class="n">data_dict</span><span class="p">,</span> <span class="n">key_list</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">current_depth_value</span> <span class="o">=</span> <span class="n">data_dict</span>
    <span class="k">while</span> <span class="n">key_list</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">lookup_key</span> <span class="o">=</span> <span class="n">key_list</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span>
                <span class="n">current_depth_value</span> <span class="o">:=</span> <span class="n">current_depth_value</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">lookup_key</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="p">):</span>
                <span class="k">return</span> <span class="n">default_value</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">continue</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">default_value</span>

    <span class="k">return</span> <span class="n">current_depth_value</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
<p>Then we might try the following examples:</p>
<div class="sphinx-bs container pb-4 docutils">
<div class="row docutils">
<div class="d-flex col-lg-12 p-0 docutils">
<div class="card w-100 shadow docutils">
<div class="card-header text-secondary docutils">
<p class="card-text">Timing our methods</p>
</div>
<div class="card-body docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">search_value</span> <span class="o">=</span> <span class="n">programmatic_depth_search</span><span class="p">(</span>
    <span class="n">data_dict</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;top_level&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;lower_level&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;our_key&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}}},</span>
    <span class="n">key_list</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;top_level&#39;</span><span class="p">,</span> <span class="s1">&#39;lower_level&#39;</span><span class="p">],</span>
    <span class="n">default_value</span><span class="o">=</span><span class="s1">&#39;Not Found&#39;</span>
<span class="p">)</span>
<span class="c1"># Returns: {&#39;our_key&#39;: 3}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sphinx-bs container pb-4 docutils">
<div class="row docutils">
<div class="d-flex col-lg-12 p-0 docutils">
<div class="card w-100 shadow docutils">
<div class="card-header text-secondary docutils">
<p class="card-text">Timing our methods</p>
</div>
<div class="card-body docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">search_value</span> <span class="o">=</span> <span class="n">programmatic_depth_search</span><span class="p">(</span>
    <span class="n">data_dict</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;top_level&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;lower_level&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;our_key&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}}},</span>
    <span class="n">key_list</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;top_level&#39;</span><span class="p">,</span> <span class="s1">&#39;lower_level&#39;</span><span class="p">,</span> <span class="s1">&#39;our_key&#39;</span><span class="p">],</span>
    <span class="n">default_value</span><span class="o">=</span><span class="s1">&#39;Not Found&#39;</span>
<span class="p">)</span>
<span class="c1"># Returns: 3</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sphinx-bs container pb-4 docutils">
<div class="row docutils">
<div class="d-flex col-lg-12 p-0 docutils">
<div class="card w-100 shadow docutils">
<div class="card-header text-secondary docutils">
<p class="card-text">Timing our methods</p>
</div>
<div class="card-body docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">search_value</span> <span class="o">=</span> <span class="n">programmatic_depth_search</span><span class="p">(</span>
    <span class="n">data_dict</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;top_level&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;lower_level&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;our_key&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}}},</span>
    <span class="n">key_list</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;top_level&#39;</span><span class="p">,</span> <span class="s1">&#39;lower_level&#39;</span><span class="p">,</span> <span class="s1">&#39;our_key&#39;</span><span class="p">,</span> <span class="s1">&#39;fail_key&#39;</span><span class="p">],</span>
    <span class="n">default_value</span><span class="o">=</span><span class="s1">&#39;Not Found&#39;</span>
<span class="p">)</span>
<span class="c1"># Returns: &#39;Not Found&#39;</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="revisiting-an-old-friend">
<h2>Revisiting an Old Friend<a class="headerlink" href="#revisiting-an-old-friend" title="Link to this heading">#</a></h2>
<p>With the hindsight of writing a testable and modularized version of our
dictionary searcher, let’s revisit our first three comparisons. We were
essentially comparing by always assuming we would either find
<code class="docutils literal notranslate"><span class="pre">our_key</span></code> and return it’s value, or it would not be found and we would
return <code class="docutils literal notranslate"><span class="pre">default_value</span></code>. However, let’s try this:</p>
<div class="sphinx-bs container pb-4 docutils">
<div class="row docutils">
<div class="d-flex col-lg-12 p-0 docutils">
<div class="card w-100 shadow docutils">
<div class="card-header text-secondary docutils">
<p class="card-text">Breaking our original functions with unexpected types</p>
</div>
<div class="card-body docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;top_level&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;lower_level&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}}</span>
<span class="n">old_style</span><span class="p">()</span>
<span class="c1"># Returns: TypeError: argument of type &#39;int&#39; is not iterable</span>

<span class="n">walrus_style</span><span class="p">()</span>
<span class="c1"># Returns: AttributeError: &#39;int&#39; object has no attribute &#39;get&#39;</span>

<span class="n">chaining_style</span><span class="p">()</span>
<span class="c1"># Returns: AttributeError: &#39;int&#39; object has no attribute &#39;get&#39;</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
<p>As you can clearly see, our fixed methods, while sufficient for our
specific initital example case, they break easily. We have tricked them
into finding a key at a particular level, but it is now an integer and
not a <code class="docutils literal notranslate"><span class="pre">dict</span></code>. I wanted to highlight this to highlight that in
modularizing our experiment, we also added robustness against the
unexpected – something we know is key. To prove this, let’s now run
this with our modularized version:</p>
<div class="sphinx-bs container pb-4 docutils">
<div class="row docutils">
<div class="d-flex col-lg-12 p-0 docutils">
<div class="card w-100 shadow docutils">
<div class="card-header text-secondary docutils">
<p class="card-text">Robustness with our programmatic approach</p>
</div>
<div class="card-body docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">search_value</span> <span class="o">=</span> <span class="n">programmatic_depth_search</span><span class="p">(</span>
    <span class="n">data_dict</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;top_level&#39;</span><span class="p">,</span> <span class="s1">&#39;lower_level&#39;</span><span class="p">,</span> <span class="s1">&#39;our_key&#39;</span><span class="p">],</span> <span class="kc">None</span>
<span class="p">)</span>
<span class="c1"># Returns: None (our default value)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
<p>Neat!</p>
</section>
<section id="what-about-the-simple-approach">
<h2>What About the Simple Approach<a class="headerlink" href="#what-about-the-simple-approach" title="Link to this heading">#</a></h2>
<div class="sphinx-bs container pb-4 docutils">
<div class="row docutils">
<div class="d-flex col-lg-12 p-0 docutils">
<div class="card w-100 shadow docutils">
<div class="card-header text-secondary docutils">
<p class="card-text">A simple, fixed lookup</p>
</div>
<div class="card-body docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">normal</span><span class="p">():</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">data_dict</span><span class="p">[</span><span class="s1">&#39;top_level&#39;</span><span class="p">][</span><span class="s1">&#39;lower_level&#39;</span><span class="p">][</span><span class="s1">&#39;our_key&#39;</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sphinx-bs container pb-4 docutils">
<div class="row docutils">
<div class="d-flex col-lg-6 col-md-6 col-sm-6 col-xs-12 p-2 docutils">
<div class="card w-100 shadow docutils">
<div class="card-header docutils">
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">column<span class="colon">:</span></dt>
<dd class="field-odd"><p class="card-text">col-lg-12 p-0</p>
</dd>
<dt class="field-even">header<span class="colon">:</span></dt>
<dd class="field-even"><p class="card-text">text-secondary</p>
</dd>
</dl>
</div></blockquote>
<p class="card-text">Comparing a fixed lookup to our programmatic approach</p>
</div>
<div class="card-body docutils">
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">timeit</span> <span class="n">normal</span>
<span class="mi">154</span> <span class="n">ns</span> <span class="err">±</span> <span class="mf">13.1</span> <span class="n">ns</span> <span class="n">per</span> <span class="n">loop</span> <span class="p">(</span><span class="n">mean</span> <span class="err">±</span> <span class="n">std</span><span class="o">.</span> <span class="n">dev</span><span class="o">.</span> <span class="n">of</span> <span class="mi">7</span> <span class="n">runs</span><span class="p">,</span> <span class="mi">10000000</span> <span class="n">loops</span> <span class="n">each</span><span class="p">)</span>

<span class="o">%</span><span class="n">timeit</span> <span class="n">programmatic_depth_search</span><span class="p">(</span><span class="n">data_dict</span><span class="p">,</span> <span class="n">key_list</span><span class="p">)</span>
<span class="mi">158</span> <span class="n">ns</span> <span class="err">±</span> <span class="mf">9.12</span> <span class="n">ns</span> <span class="n">per</span> <span class="n">loop</span> <span class="p">(</span><span class="n">mean</span> <span class="err">±</span> <span class="n">std</span><span class="o">.</span> <span class="n">dev</span><span class="o">.</span> <span class="n">of</span> <span class="mi">7</span> <span class="n">runs</span><span class="p">,</span> <span class="mi">10000000</span> <span class="n">loops</span> <span class="n">each</span><span class="p">)</span>

<span class="n">key_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;top_level&#39;</span><span class="p">,</span> <span class="s1">&#39;lower_level&#39;</span><span class="p">,</span> <span class="s1">&#39;our_key&#39;</span><span class="p">]</span>

<span class="o">%</span><span class="n">timeit</span> <span class="n">programmatic_depth_search</span><span class="p">(</span><span class="n">data_dict</span><span class="p">,</span> <span class="n">key_list</span><span class="p">)</span>
<span class="mi">156</span> <span class="n">ns</span> <span class="err">±</span> <span class="mf">22.6</span> <span class="n">ns</span> <span class="n">per</span> <span class="n">loop</span> <span class="p">(</span><span class="n">mean</span> <span class="err">±</span> <span class="n">std</span><span class="o">.</span> <span class="n">dev</span><span class="o">.</span> <span class="n">of</span> <span class="mi">7</span> <span class="n">runs</span><span class="p">,</span> <span class="mi">10000000</span> <span class="n">loops</span> <span class="n">each</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div>
</div>
</div>
</div>
<div class="sphinx-bs container pb-4 docutils">
<div class="row docutils">
<div class="d-flex col-lg-12 p-0 docutils">
<div class="card w-100 shadow docutils">
<div class="card-header text-secondary docutils">
<p class="card-text">Trying with a failure</p>
</div>
<div class="card-body docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">normal</span><span class="p">(</span><span class="n">default_value</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">data_dict</span><span class="p">[</span><span class="s1">&#39;top_level&#39;</span><span class="p">][</span><span class="s1">&#39;lower_level&#39;</span><span class="p">][</span><span class="s1">&#39;fail_key&#39;</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">default_value</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">timeit</span> <span class="n">normal</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="mi">528</span> <span class="n">ns</span> <span class="err">±</span> <span class="mf">98.3</span> <span class="n">ns</span> <span class="n">per</span> <span class="n">loop</span> <span class="p">(</span><span class="n">mean</span> <span class="err">±</span> <span class="n">std</span><span class="o">.</span> <span class="n">dev</span><span class="o">.</span> <span class="n">of</span> <span class="mi">7</span> <span class="n">runs</span><span class="p">,</span> <span class="mi">1000000</span> <span class="n">loops</span> <span class="n">each</span><span class="p">)</span>

<span class="n">key_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;top_level&#39;</span><span class="p">,</span> <span class="s1">&#39;lower_level&#39;</span><span class="p">,</span> <span class="s1">&#39;fail_key&#39;</span><span class="p">]</span>

<span class="n">data_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;top_level&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;lower_level&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;our_key&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}}}</span>

<span class="o">%</span><span class="n">timeit</span> <span class="n">programmatic_depth_search</span><span class="p">(</span><span class="n">data_dict</span><span class="p">,</span> <span class="n">key_list</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="mi">164</span> <span class="n">ns</span> <span class="err">±</span> <span class="mf">21.8</span> <span class="n">ns</span> <span class="n">per</span> <span class="n">loop</span> <span class="p">(</span><span class="n">mean</span> <span class="err">±</span> <span class="n">std</span><span class="o">.</span> <span class="n">dev</span><span class="o">.</span> <span class="n">of</span> <span class="mi">7</span> <span class="n">runs</span><span class="p">,</span> <span class="mi">10000000</span> <span class="n">loops</span> <span class="n">each</span><span class="p">)</span>

<span class="n">key_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;top_level&#39;</span><span class="p">,</span> <span class="s1">&#39;fail_key&#39;</span><span class="p">,</span> <span class="s1">&#39;our_level&#39;</span><span class="p">]</span>

<span class="o">%</span><span class="n">timeit</span> <span class="n">programmatic_depth_search</span><span class="p">(</span><span class="n">data_dict</span><span class="p">,</span> <span class="n">key_list</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="mi">163</span> <span class="n">ns</span> <span class="err">±</span> <span class="mi">30</span> <span class="n">ns</span> <span class="n">per</span> <span class="n">loop</span> <span class="p">(</span><span class="n">mean</span> <span class="err">±</span> <span class="n">std</span><span class="o">.</span> <span class="n">dev</span><span class="o">.</span> <span class="n">of</span> <span class="mi">7</span> <span class="n">runs</span><span class="p">,</span> <span class="mi">10000000</span> <span class="n">loops</span> <span class="n">each</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sphinx-bs container pb-4 docutils">
<div class="row docutils">
<div class="d-flex col-lg-12 p-0 docutils">
<div class="card w-100 shadow docutils">
<div class="card-header text-secondary docutils">
<p class="card-text">Breaking our original functions with unexpected types</p>
</div>
<div class="card-body docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">normal</span><span class="p">(</span><span class="n">default_value</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">data_dict</span><span class="p">[</span><span class="s1">&#39;top_level&#39;</span><span class="p">][</span><span class="s1">&#39;fail_key&#39;</span><span class="p">][</span><span class="s1">&#39;our_key&#39;</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">default_value</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">timeit</span> <span class="n">normal</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="mi">390</span> <span class="n">ns</span> <span class="err">±</span> <span class="mi">11</span> <span class="n">ns</span> <span class="n">per</span> <span class="n">loop</span> <span class="p">(</span><span class="n">mean</span> <span class="err">±</span> <span class="n">std</span><span class="o">.</span> <span class="n">dev</span><span class="o">.</span> <span class="n">of</span> <span class="mi">7</span> <span class="n">runs</span><span class="p">,</span> <span class="mi">1000000</span> <span class="n">loops</span> <span class="n">each</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
</section>

<div class="section ablog__blog_comments">
     
<div class="section ablog__prev-next">
  <span class="ablog__prev">
    
  </span>
  <span class="ablog__spacer">&nbsp;</span>
  <span class="ablog__next">
     
    <a href="../python_generators_and_comprehension/">
      <span>Python Generators and Comprehension</span>
      
      <i class="fa fa-arrow-circle-right"></i>
      
    </a>
    
  </span>
</div>
  
</div>

                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-bread-and-butter">The Bread and Butter</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-simple-example">A Simple Example</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#summarizing-our-toy-data-experiments">Summarizing Our Toy Data Experiments</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#moving-beyond-our-toy-data-let-s-make-some-real-improvements">Moving Beyond Our Toy Data - Let’s Make Some Real Improvements</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#revisiting-an-old-friend">Revisiting an Old Friend</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#what-about-the-simple-approach">What About the Simple Approach</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/nested_dictionary_lookups.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2023, Matthew Martz.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>